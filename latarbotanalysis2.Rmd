---
title: "LaTARBot Data"
author: "Jessica Nicosia"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  pdf_document:
    toc: yes
    toc_depth: 6
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, collapse = TRUE, fig.show = 'hold')
rm(list = ls(all = TRUE))
```

```{r, include = FALSE, echo = FALSE, message = FALSE, warning = FALSE}
library(readit)
library(lme4)
library(broom)
library(ggforce)
library(effsize)
library(pROC)
library(DT)
library(psych)
library(survminer)
library(survival)
library(data.table)
library(sjPlot)
library(ggpubr)
library(data.table)
library(gtsummary)
library(Rmisc)
library(pander)
library(ez)
library(directlabels)
library(tidyverse)
```

# Load Data
```{r}
setwd("~/CTRLab/LaTARBot/latarprocessing/")

##### CAPACITIVE
wd <- "./04-CSV_data/Capacitive_Tap_Latency/"
N <- paste(wd, list.files(wd), sep = "")
data <- data.frame()
for (i in 1:length(N)){
  file <- N[i]
  #print(file)
  data_in <- read.csv(file, header = TRUE, stringsAsFactors = FALSE)
  data_in$procedure <- basename(N[i])
  data <- rbind(data, data_in)
}

capacitivedata2 <- data
#capacitivedata_SamsungA30 <- subset(capacitivedata, phone_model == "Samsung SM-A305G") %>% mutate(procedure = "Samsung_SM-A305G_Capacitive_Tap_Latency_500_ms_50_x", load = "none")
#capacitivedata2 <- full_join(capacitivedata_SamsungA30, capacitivedata2)


##### DISPLAY
wd <- "./04-CSV_data/Display_Latency/"
N <- paste(wd, list.files(wd), sep = "")
data <- data.frame()
for (i in 1:length(N)){
  file <- N[i]
  #print(file)
  data_in <- read.csv(file, header = TRUE, stringsAsFactors = FALSE)
  data_in$procedure <- basename(N[i])
  data <- rbind(data, data_in)
}

displaydata2 <- data
#displaydata_SamsungA30 <- subset(displaydata, phone_model == "Samsung SM-A305G") %>% mutate(procedure = "Samsung_SM-A305G_Display_Latency_500_ms_50_x", load = "none")
#displaydata2 <- full_join(displaydata_SamsungA30, displaydata2)



##### SOLENOID
wd <- "./04-CSV_data/Solenoid_Tap_Latency/"
N <- paste(wd, list.files(wd), sep = "")
data <- data.frame()
for (i in 1:length(N)){
  file <- N[i]
  #print(file)
  data_in <- read.csv(file, header = TRUE, stringsAsFactors = FALSE)
  data_in$procedure <- basename(N[i])
  data <- rbind(data, data_in)
}

solenoiddata2 <- data
#solenoiddata_SamsungA30 <- subset(solenoiddata, phone_model == "Samsung SM-A305G") %>% mutate(procedure = "Samsung_SM-A305G_Solenoid_Tap_Latency_500_ms_50_x", load = "none")
#solenoiddata2 <- full_join(solenoiddata_SamsungA30, solenoiddata2)

```

# Raw Line Graphs
```{r}
# capacitive
# raw
ggplot(capacitivedata2, aes(x = index_fixture, y = action_latency_us, color = procedure)) +
  labs(title = "Raw Capacitive") +
  geom_line(aes(color = procedure)) +
  geom_point(aes(color = procedure)) + 
  facet_wrap(~load) +
  theme_classic() +
  theme(strip.background = element_blank())
  

# display
# raw
ggplot(displaydata2, aes(x = index_fixture, y = display_latency_us, color = procedure)) +
  labs(title = "Raw Display") +
  geom_line(aes(color = procedure)) +
  geom_point(aes(color = procedure))  + 
  facet_wrap(~load) +
  theme_classic() +
  theme(strip.background = element_blank())

# solenoid
# raw
ggplot(solenoiddata2, aes(x = index_fixture, y = action_latency_us, color = procedure)) +
  labs(title = "Raw Solenoid") +
  geom_line(aes(color = procedure)) +
  geom_point(aes(color = procedure)) +  
  facet_grid(cols = vars(load)) + 
  facet_wrap(~load) +
  theme_classic() +
  theme(strip.background = element_blank())

# some quick anovas
pander(summary(aov(action_latency_us ~ procedure*load, data = capacitivedata2)))
pander(summary(aov(display_latency_us ~ procedure*load, data = displaydata2)))
pander(summary(aov(action_latency_us ~ procedure*load, data = solenoiddata2)))

```









